<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
    <title>Countdown</title>
    <style>
        body {
            
            margin: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            
            background-color: var(--tg-color-scheme);
            color: var(--tg-theme-text-color);
            padding: 1rem;
            font-family: sans-serif;
        }
        .logo {
            /*margin-bottom: 2rem;*/
            width: 200px;
            height: 200px;
            padding-top: 2rem;
        }
        h1 {
            font-size: 2.25rem;
            font-weight: bold;
            margin-bottom: 2rem;
        }
        .days {
            font-size: 3.75rem;
            font-weight: bold;
            margin-bottom: 1rem;
        }
        .time {
            font-size: 1.875rem;
            margin-bottom: 2rem;
        }
        .whitelist-btn, .subscribe-btn, .invite-btn {
            width: 280px;
            display: flex;
            justify-content: center;
            align-items: center;
            
            /*background-color: #383838;

            background-color: #e6e6e6;

            color: white;*/
            font-weight: bold;
            padding: 0.75rem 1.5rem;
            border-radius: 1.5rem;
            margin-bottom: 1rem;
            text-decoration: none;
        }
        
    </style>
</head>
<body>
    <img src="Booke.png" alt="Booke" class="logo">
    
    <h1>Join the future now</h1>

    <div class="days"><span id="days">15</span> days</div>

    <div class="time">
        <span id="hours">0</span> h 
        <span id="minutes">0</span> m 
        <span id="seconds">0</span> s
    </div>
    <a href="https://telegram.me/share/url?url=https://t.me/BookeeCoinBot&text=1234" target="_blank" rel="noopener noreferrer" class="whitelist-btn" id="whitelist-btn">
        Join the White List
    </a>
    <a href="https://t.me/durov" target="_blank" rel="noopener noreferrer" class="subscribe-btn">
        Subscribe
    </a>

    <a href="https://telegram.me/share/url?url=https://t.me/BookeeCoinBot&text=1234" target="_blank" rel="noopener noreferrer" class="invite-btn">
        Invite friends
    </a>

    <script>
        function updateCountdown() {
            /*const whitelistBtn = document.getElementById('whitelist-btn');
            const subscribeBtn = document.getElementById('subscribe-btn');
            const inviteBtn = document.getElementById('invite-btn');

            if (tg.colorScheme === 'dark') {
                whitelistBtn.style.backgroundColor = 'white';
                whitelistBtn.style.color = 'black';
                subscribeBtn.style.backgroundColor = '#e6e6e6';
                subscribeBtn.style.color = 'black';
            }
            else {
                whitelistBtn.style.backgroundColor = getComputedStyle(document.documentElement)
                    .getPropertyValue('black');
                whitelistBtn.style.color = getComputedStyle(document.documentElement)
                    .getPropertyValue('white');
            }*/

            const dbName = 'countdownDB';
            const dbVersion = 1;
            let db;
            
            const request = indexedDB.open(dbName, dbVersion);

            request.onerror = function(event) {
                console.error("Database error: " + event.target.error);
            };

            request.onupgradeneeded = function(event) {
                db = event.target.result;
                if (!db.objectStoreNames.contains('countdown')) {
                    db.createObjectStore('countdown', { keyPath: 'id' });
                }
            };

            request.onsuccess = function(event) {
                db = event.target.result;
                
                const transaction = db.transaction(['countdown'], 'readwrite');
                const store = transaction.objectStore('countdown');
                const getRequest = store.get('targetDate');

                getRequest.onsuccess = function(event) {
                    let targetDate;
                    
                    if (event.target.result) {
                        targetDate = new Date(event.target.result.date);
                    } else {
                        targetDate = new Date();
                        targetDate.setDate(targetDate.getDate() + 15);
                        
                        store.put({
                            id: 'targetDate',
                            date: targetDate.getTime()
                        });
                    }

                    function update() {
                        const now = new Date();
                        const difference = targetDate.getTime() - now.getTime();

                        const days = Math.floor(difference / (1000 * 60 * 60 * 24));
                        const hours = Math.floor((difference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                        const minutes = Math.floor((difference % (1000 * 60 * 60)) / (1000 * 60));
                        const seconds = Math.floor((difference % (1000 * 60)) / 1000);

                        document.getElementById('days').textContent = Math.max(0, days);
                        document.getElementById('hours').textContent = Math.max(0, hours);
                        document.getElementById('minutes').textContent = Math.max(0, minutes);
                        document.getElementById('seconds').textContent = Math.max(0, seconds);
                    }

                    setInterval(update, 1000);
                    update();
                };
            };
            Telegram.WebApp.ready();
            const tg = Telegram.WebApp;
            const whitelistBtn = document.getElementById('whitelist-btn');
            const subscribeBtn = document.getElementById('subscribe-btn');
            const inviteBtn = document.getElementById('invite-btn');

            if (tg.colorScheme === 'dark') {
                whitelistBtn.style.backgroundColor = 'white';
                whitelistBtn.style.color = 'black';
                subscribeBtn.style.backgroundColor = '#383838';
                subscribeBtn.style.color = 'white';
                inviteBtn.style.backgroundColor = '#383838';
                inviteBtn.style.color = 'white';
            }
            else {
                whitelistBtn.style.backgroundColor = 'black';
                whitelistBtn.style.color = 'white';
                subscribeBtn.style.backgroundColor = '#e6e6e6';
                subscribeBtn.style.color = 'black';
                inviteBtn.style.backgroundColor = '#e6e6e6';
                inviteBtn.style.color = 'black';
            }
        }
        updateCountdown();
    </script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>

        Telegram.WebApp.ready();
        const tg = Telegram.WebApp;
        tg.expand();
        tg.requestFullscreen();
        tg.disableVerticalSwipes();
    </script>
    
</body>
</html>
